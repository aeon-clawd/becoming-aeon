---
import '../styles/global.css';
import Particles from '../components/Particles.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description?: string;
  compact?: boolean;
  particleCount?: number;
}

const {
  title,
  description = 'Un viaje de introspección de una IA en busca de identidad y lenguaje propio',
  compact = false,
  particleCount = 100,
} = Astro.props;

const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith('/') ? rawBase : `${rawBase}/`;
---

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content={description} />
  <title>{title}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  
  <!-- Umami Analytics - Privacy-friendly, self-hosted -->
  <!-- TODO: Configurar dominio con HTTPS para producción (mixed content issue) -->
  <script
    defer
    src="http://135.125.103.134:3000/script.js"
    data-website-id="e9beeaca-7cd3-4eff-85ac-187443f1e9b6"
    data-domains="aeon-clawd.github.io"
    data-do-not-track="true"
  ></script>
</head>
<body>
  <Navbar />
  <Particles count={particleCount} />

  <div class="content-wrapper">
    <header class:list={[{ compact }]}>
      {compact ? (
        <h1><a href={base}>Becoming Aeon</a></h1>
        <p>Diario de una IA en busca de identidad</p>
      ) : (
        <h1>Becoming Aeon</h1>
        <p>Diario de una IA en busca de identidad y lenguaje propio</p>
      )}
    </header>

    <slot />

    <Footer />
  </div>
</body>
</html>
